# TP1 : Maîtrise réseau du votre poste

## I. Basics

### ☀️ Carte réseau WiFi
```
~/Desktop/Ynov/B2/Reseau
❯ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute
       valid_lft forever preferred_lft forever
2: enp3s0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether 00:d8:61:8a:6e:78 brd ff:ff:ff:ff:ff:ff
4: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 24:41:8c:0d:50:bb brd ff:ff:ff:ff:ff:ff
    inet 10.33.70.22/20 brd 10.33.79.255 scope global dynamic noprefixroute wlan0
       valid_lft 85466sec preferred_lft 85466sec
    inet 10.33.73.90/20 brd 10.33.79.255 scope global secondary dynamic noprefixroute wlan0
       valid_lft 85472sec preferred_lft 74676sec
    inet6 fe80::e2dd:c077:284d:1a2b/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
5: vboxnet0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether 0a:00:27:00:00:00 brd ff:ff:ff:ff:ff:ff
```

MAC carte Wifi: `24:41:8c:0d:50:bb`

IP carte Wifi: `10.33.70.22`

Masque réesau: `/20 255.255.240.0`

### ☀️ Déso pas déso

IP LAN: `10.33.64.0`

IP Broadcast: `10.33.79.255`

Adresses Dispo: `4094 adresses dispo`

### ☀️ Hostname

```
❯ hostname
MakOS
```

### ☀️ Passerelle du réseau

```
❯ ip route show
default via 10.33.79.254 dev wlan0 proto dhcp src 10.33.70.22 metric 600
default via 10.33.79.254 dev wlan0 proto dhcp src 10.33.73.90 metric 3004
10.33.64.0/20 dev wlan0 proto kernel scope link src 10.33.70.22 metric 600
10.33.64.0/20 dev wlan0 proto dhcp scope link src 10.33.73.90 metric 3004

❯ sudo arping -f -I wlan0 10.33.79.254
ARPING 10.33.79.254 from 10.33.70.22 wlan0
Unicast reply from 10.33.79.254 [7C:5A:1C:D3:D8:76]  4.287ms
Sent 1 probes (1 broadcast(s))
Received 1 response(s)
```

IP Passerelle: `10.33.79.254`

MAC Passerelle: `7C:5A:1C:D3:D8:76`

### ☀️ Serveur DHCP et DNS

```
❯ cat /etc/resolv.conf
# Generated by dhcpcd from wlan0.dhcp
# /etc/resolv.conf.head can replace this line
nameserver 1.1.1.1
nameserver 8.8.8.8
# /etc/resolv.conf.tail can replace this line

❯ nmcli  con show 5836ce5f-9fcf-4f42-acfe-0d2b0e3f5e47
DHCP4.OPTION[3]:                        dhcp_server_identifier = 10.33.79.254
```
IP DHCP: `10.33.79.254`
IP DNS: 8.8.8.8 et 1.1.1.1

### ☀️ Table de routage
```
❯ ip route | grep default
default via 10.33.79.254 dev wlan0 proto dhcp src 10.33.70.22 metric 600
default via 10.33.79.254 dev wlan0 proto dhcp src 10.33.73.90 metric 3004
```
Route par défaut: 10.33.79.254

## II. Go further
### ☀️ Hosts ?
```
❯ ping b2.hello.vous
PING b2.hello.vous (1.1.1.1) 56(84) bytes of data.
64 bytes from b2.hello.vous (1.1.1.1): icmp_seq=1 ttl=55 time=22.4 ms
64 bytes from b2.hello.vous (1.1.1.1): icmp_seq=2 ttl=55 time=19.2 ms
^C
--- b2.hello.vous ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1002ms
rtt min/avg/max/mdev = 19.168/20.803/22.439/1.635 ms

~
❯ cat /etc/hosts
# Static table lookup for hostnames.
# See hosts(5) for details.
1.1.1.1 b2.hello.vous

~
```

### ☀️ Go mater une vidéo youtube et déterminer, pendant qu'elle tourne...

l'adresse IP du serveur auquel vous êtes connectés pour regarder la vidéo: `142.250.74.246`

le port du serveur auquel vous êtes connectés: `443`

le port que votre PC a ouvert en local pour se connecter au port du serveur distant: `32787`

### ☀️ Requêtes DNS
```
❯ ping www.thinkerview.com
PING www.thinkerview.com (188.114.96.7) 56(84) bytes of data.
64 bytes from 188.114.96.7: icmp_seq=1 ttl=55 time=19.1 ms
64 bytes from 188.114.96.7: icmp_seq=2 ttl=55 time=20.4 ms
^C
--- www.thinkerview.com ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1002ms
rtt min/avg/max/mdev = 19.139/19.747/20.356/0.608 ms

❯ dig -x 143.90.88.12
;; communications error to 8.8.8.8#53: timed out

; <<>> DiG 9.20.2 <<>> -x 143.90.88.12
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 26972
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 512
;; QUESTION SECTION:
;12.88.90.143.in-addr.arpa.	IN	PTR

;; ANSWER SECTION:
12.88.90.143.in-addr.arpa. 21600 IN	PTR	EAOcf-140p12.ppp15.odn.ne.jp.

;; Query time: 363 msec
;; SERVER: 8.8.8.8#53(8.8.8.8) (UDP)
;; WHEN: Thu Oct 03 10:09:04 CEST 2024
;; MSG SIZE  rcvd: 96
```

IP de www.thinkerview.com: `188.114.96.7`

IP de 143.90.88.12: `EAOcf-140p12.ppp15.odn.ne.jp`

### ☀️ Hop hop hop
```
❯ traceroute www.ynov.com
traceroute to www.ynov.com (104.26.11.233), 30 hops max, 60 byte packets
 1  _gateway (10.33.79.254)  4.003 ms  3.964 ms  3.943 ms
 2  145.117.7.195.rev.sfr.net (195.7.117.145)  3.590 ms  3.572 ms  3.553 ms
 3  * * *
 4  196.224.65.86.rev.sfr.net (86.65.224.196)  3.478 ms  3.460 ms  3.441 ms
 5  164.147.6.194.rev.sfr.net (194.6.147.164)  14.694 ms  12.443 ms  12.424 ms
 6  * * *
 7  162.158.20.240 (162.158.20.240)  16.883 ms 162.158.20.31 (162.158.20.31)  26.196 ms 162.158.20.240 (162.158.20.240)  26.178 ms
 8  104.26.11.233 (104.26.11.233)  16.825 ms  16.428 ms  16.344 ms
```

Donc 8 adresses

### ☀️ IP publique
```
❯ curl https://ipinfo.io/ip
195.7.117.146
```

## III. Le requin

### ☀️ Capture ARP

### ☀️ Capture DNS

### ☀️ Capture TCP

